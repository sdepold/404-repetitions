<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><div id="game"></div><script>!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=28)}([function(module,__webpack_exports__,__webpack_require__){"use strict";function initAudio(){var t=new(window.AudioContext||window.webkitAudioContext),e=t.createScriptProcessor(1024,1,1);e.connect(t.destination);return navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){t.createMediaStreamSource(n).connect(e);var i=!1;e.onaudioprocess=function(t){i||(i=!0)}}))}function plu(){pa(",,80,.3,.4,.7,2,.1,-0.73,3.42,-430,.09,.17,,,,.19")}function pc(){pa(",.1,75,.03,.08,.17,1,1.88,7.83,,,,,.4")}function pa(seq){zzfx(...eval(`[${seq}]`))}__webpack_require__.d(__webpack_exports__,"a",(function(){return initAudio})),__webpack_require__.d(__webpack_exports__,"d",(function(){return plu})),__webpack_require__.d(__webpack_exports__,"c",(function(){return pc})),__webpack_require__.d(__webpack_exports__,"b",(function(){return pa}))},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var s=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[n].concat(a).concat([s]).join("\n")}var r;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var a=this[s][0];"number"==typeof a&&(i[a]=!0)}for(s=0;s<t.length;s++){var r=t[s];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(t,e,n){var i,s,a={},r=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=i.apply(this,arguments)),s}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},c=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=o.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),h=null,l=0,d=[],p=n(15);function u(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=a[i.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](i.parts[r]);for(;r<i.parts.length;r++)s.parts.push(v(i.parts[r],e))}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(v(i.parts[r],e));a[i.id]={id:i.id,refs:1,parts:o}}}}function m(t,e){for(var n=[],i={},s=0;s<t.length;s++){var a=t[s],r=e.base?a[0]+e.base:a[0],o={css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(o):n.push(i[r]={id:r,parts:[o]})}return n}function f(t,e){var n=c(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),d.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=c(t.insertAt.before,n);n.insertBefore(e,s)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function x(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return y(e,t.attrs),f(t,e),e}function y(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function v(t,e){var n,i,s,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var r=l++;n=h||(h=x(e)),i=A.bind(null,n,r,!1),s=A.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),f(t,e),e}(e),i=C.bind(null,n,e),s=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=x(e),i=S.bind(null,n),s=function(){g(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=m(t,e);return u(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var r=n[s];(o=a[r.id]).refs--,i.push(o)}t&&u(m(t,e),e);for(s=0;s<i.length;s++){var o;if(0===(o=i[s]).refs){for(var c=0;c<o.parts.length;c++)o.parts[c]();delete a[o.id]}}}};var w,b=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function A(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,s);else{var a=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}function S(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function C(t,e,n){var i=n.css,s=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||a)&&(i=p(i)),s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var r=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}},function(t){t.exports=JSON.parse('{"minutesPerTick":1,"staminaPerTick":0.01,"tickDelay":33}')},function(t,e,n){"use strict";e.initFont=({height:t=5,...e}={},n)=>{if(e&&n)return(i,s=0,a=0,r=24,o="#000")=>{[...i].reduce((i,c)=>{const h=r/t,l=e[c.charCodeAt()]||"",d=(((t=>t>0)(l)?l:l.codePointAt())||0).toString(2),p=Math.ceil(d.length/t),u=i+h;return((t,e)=>t.match(new RegExp(`.{${e}}`,"g")))(d.padStart(p*t,0),t).map((t,e)=>[...t].map((t,i)=>{n.fillStyle=+t?o:"transparent",n.fillRect(s+u+e*h,a+i*h,h,h)})),i+(p+1)*h},0)}};const i=[...Array(33),29,,,,,,12,,,,"ᇄ",3,"ႄ",1,1118480,"縿",31,"庽","嚿","炟","皷","纷","䈟","线","皿",17,,,"⥊",,"䊼",,"㹏","纮","縱","縮","纵","纐","񴚦","粟","䟱","丿",1020241,"簡",33059359,1024159,"縿","纜","񼙯","繍","皷","䏰","簿",25363672,32541759,18157905,"惸",18470705,,,,,"С"];e.font=i},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t){t.exports=JSON.parse('{"name":"competition","requirements":{"level":4},"items":[{"title":"Local competition","requirements":{"level":4,"time":120},"effects":{"experience":200,"rank":-4},"miniGame":true},{"title":"State competition","requirements":{"level":10,"time":720},"effects":{"experience":2000,"rank":-40},"miniGame":true},{"title":"World championship","requirements":{"level":40,"time":21600},"effects":{"experience":10000,"rank":-404},"miniGame":true}]}')},function(t){t.exports=JSON.parse('{"name":"store","items":[{"title":"Burger","requirements":{"money":5,"time":10},"effects":{"money":-5,"stamina":20}},{"title":"Veggi Bowl","requirements":{"money":20,"time":60},"effects":{"money":-20,"stamina":60}}]}')},function(t){t.exports=JSON.parse('{"name":"office","items":[{"title":"Chop wood","requirements":{"strength":2,"time":120,"stamina":30},"effects":{"stamina":-30,"experience":25,"money":50}},{"title":"Dog walk","requirements":{"strength":0,"time":10,"stamina":15},"effects":{"money":10,"experience":10,"stamina":-15}}]}')},function(t){t.exports=JSON.parse('{"name":"gym","items":[{"title":"WOTD XYZ","requirements":{"strength":1,"time":30,"stamina":"50"},"effects":{"stamina":-50,"experience":225}}]}')},function(t,e){window.AudioContext=window.AudioContext||window.webkitAudioContext},function(t,e){zzfxV=.3,zzfx=(t=1,e=.05,n=220,i=0,s=0,a=.1,r=0,o=1,c=0,h=0,l=0,d=0,p=0,u=0,m=0,f=0,g=0,x=1,y=0,v=0)=>{let w,b,A=2*Math.PI,S=c*=500*A/zzfxR**2,C=(0<m?1:-1)*A/4,T=n*=(1+2*e*Math.random()-e)*A/zzfxR,E=[],k=0,I=0,M=0,z=1,R=0,L=0,q=0;for(i=99+zzfxR*i,y*=zzfxR,s*=zzfxR,a*=zzfxR,g*=zzfxR,h*=500*A/zzfxR**3,m*=A/zzfxR,l*=A/zzfxR,d*=zzfxR,p=zzfxR*p|0,b=i+y+s+a+g|0;M<b;E[M++]=q)++L%(100*f|0)||(q=r?1<r?2<r?3<r?Math.sin((k%A)**3):Math.max(Math.min(Math.tan(k),1),-1):1-(2*k/A%2+2)%2:1-4*Math.abs(Math.round(k/A)-k/A):Math.sin(k),q=(p?1-v+v*Math.sin(2*Math.PI*M/p):1)*(0<q?1:-1)*Math.abs(q)**o*t*zzfxV*(M<i?M/i:M<i+y?1-(M-i)/y*(1-x):M<i+y+s?x:M<b-g?(b-M-g)/a*x:0),q=g?q/2+(g>M?0:(M<b-g?1:(b-M)/g)*E[M-g|0]/2):q),w=(n+=c+=h)*Math.sin(I*m-C),k+=w-w*u*(1-1e9*(Math.sin(M)+1)%2),I+=w-w*u*(1-1e9*(Math.sin(M)**2+1)%2),z&&++z>d&&(n+=l,T+=l,z=0),!p||++R%p||(n=T,c=S,z=z||1);return(t=zzfxX.createBuffer(1,b,zzfxR)).getChannelData(0).set(E),(n=zzfxX.createBufferSource()).buffer=t,n.connect(zzfxX.destination),n.start(),n},zzfxX=new(window.AudioContext||webkitAudioContext),zzfxR=44100},function(t,e,n){var i=n(13);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:undefined,insertInto:void 0};n(2)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(5);(t.exports=n(1)(!1)).push([t.i,"@keyframes player-walk {\n  100% {\n    background-position-x: -80px;\n  }\n}\n.player {\n  position: absolute;\n  font-size: 50px;\n  background: url("+i(n(14))+");\n  background-size: 80px;\n  width: 40px;\n  height: 40px;\n  image-rendering: -moz-crisp-edges;\n  image-rendering: -webkit-crisp-edges;\n  image-rendering: pixelated;\n  image-rendering: crisp-edges;\n}\n.player.walk {\n  animation: player-walk 0.4s steps(2) infinite;\n}\n.player.inverse {\n  transform: scaleX(-1);\n}\n.player.dressed {\n  background-position-y: -40px;\n}\n",""])},function(t,e){t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoBAMAAAB+0KVeAAAAHlBMVEUAAAAAAAApERJvIibEIiL/1Jywd2MeFxQvXKYtJEtCmJldAAAAAXRSTlMAQObYZgAAAKNJREFUeNrd0TUWwkAQgGGcNoPT8rgAeoFIH5lQY3MCcgDKlJS5LTI7uDtEv/fHs7GnTHHeJWqQ1/ZZ140Wa8OEYbCELDS6EoUJE5E4bhiYQH2OzJMxyzfaY4BWYwWmkk99FnNPWURhcXO4h0TafrR9KqkIIJeDXYLY26f4f43RRG9J3DBwRVnPEBbd1nqMjJZ6u0oYSbTDqKQiwEzGaFq9d4zmMNlD/F/uSw0AAAAASUVORK5CYII="},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var s,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(s=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}},function(t,e,n){var i=n(17);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:undefined,insertInto:void 0};n(2)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".menu {\n  background: white;\n  position: absolute;\n  padding: 10px;\n  margin: 10px;\n  border: 2px solid black;\n  border-radius: 4px;\n}\n",""])},function(t,e,n){var i=n(19);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:undefined,insertInto:void 0};n(2)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"@keyframes pulse-green {\n  0% {\n    transform: scale(0.95);\n    box-shadow: 0 0 0 0 rgba(51, 217, 178, 0.7);\n  }\n  70% {\n    transform: scale(1);\n    box-shadow: 0 0 0 10px rgba(51, 217, 178, 0);\n  }\n  100% {\n    transform: scale(0.95);\n    box-shadow: 0 0 0 0 rgba(51, 217, 178, 0);\n  }\n}\n@keyframes pulse-red {\n  0% {\n    transform: scale(0.95);\n    box-shadow: 0 0 0 0 rgba(255, 82, 82, 0.7);\n  }\n  70% {\n    transform: scale(1);\n    box-shadow: 0 0 0 10px rgba(255, 82, 82, 0);\n  }\n  100% {\n    transform: scale(0.95);\n    box-shadow: 0 0 0 0 rgba(255, 82, 82, 0);\n  }\n}\n.mini-game {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n}\n.mini-game .enemy,\n.mini-game .target {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.8);\n  border: 2px solid white;\n  margin-top: -10px;\n  color: white;\n  padding: 10px;\n}\n.mini-game .enemy {\n  z-index: 1;\n}\n.mini-game .enemy.collides {\n  border: 2px solid #ffb142;\n  color: #ffb142;\n}\n.mini-game .enemy.contains {\n  border: 2px solid #33d9b2;\n  color: #33d9b2;\n}\n.mini-game .enemy.missed {\n  border: 2px solid #ff5252;\n  color: #ff5252;\n  animation: pulse-red 2s infinite;\n}\n.mini-game .enemy.destroyed {\n  border: 2px solid #33d9b2;\n  color: #33d9b2;\n  animation: pulse-green 2s infinite;\n}\n.mini-game .target {\n  top: 70%;\n  left: 50%;\n  height: 50px;\n  width: 50px;\n  margin-left: -26px;\n  margin-top: -25px;\n}\n.mini-game .score {\n  position: absolute;\n  bottom: -80px;\n  margin-left: 50px;\n}\n.mini-game .start-mini-game {\n  margin-left: 20px;\n  margin-top: 60px;\n}\n",""])},function(t,e,n){var i=n(21);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:undefined,insertInto:void 0};n(2)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(5);(t.exports=n(1)(!1)).push([t.i,".ground {\n  position: absolute;\n  left: calc(-1 * calc(30px * 3) / 2);\n  top: calc(-1 * calc(15px * 3) / 2);\n  width: 120%;\n}\n.ground .tile {\n  position: absolute;\n  width: calc(30px * 3);\n  height: calc(15px * 3);\n  float: left;\n  background: url("+i(n(22))+");\n  background-size: calc(2 * calc(30px * 3));\n}\n.ground .tile.grass {\n  background-position-x: calc(30px * 3);\n}\n",""])},function(t,e){t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAPCAMAAACPzFxDAAAAVFBMVEUAAABTU1w7czRRUVpOT1c6cDM3bTBLS1NOTlZUVF5PT1g8dTQ3bDA4bjEzaCw5cDFNTVZPT1c4cDE3bS82ay84bTFQUFlMTFU5cTE4bzE1ai43bjDoQ34KAAAAAXRSTlMAQObYZgAAAPxJREFUeNp90lWSBCAMRVEgwaXd97/PeUm7MLf4PZBUYd6z1vyTc2YeWeY59y6EKSfiGDlFop/UB837nzTblEpKkZnom1bXWm9tKP+imQtmtpTgwT9oDR0zu0WDf+cES8zLJSPAklb05B52vdlstwEB9rbzD04Wr9J+eUhlv1dMzKUoB3W1bo6n7bldTifFPoTer9xaPBpjlGeXfDjo89CM8Ymcq8cwxpBnt+F81uehA8ZXTki9BlOK+PvLkngNpnfx6LGzJWRJYpVvO7sjcl4KKpU+UiU9sHlJlfTA318ExSgH9CNVGB5n8k002MkPk2CVzrjSOTfzlE77pH+UIgxzZt9otwAAAABJRU5ErkJggg=="},function(t,e,n){var i=n(24);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:undefined,insertInto:void 0};n(2)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".welcome-screen {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.7);\n}\n",""])},function(t,e,n){var i=n(26);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:undefined,insertInto:void 0};n(2)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(5);(t.exports=n(1)(!1)).push([t.i,"html,\nbody {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  background: black;\n}\nbody {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n#game {\n  position: relative;\n  height: 610px;\n  width: 410px;\n  background-color: #386F32;\n  overflow: hidden;\n}\n* {\n  image-rendering: -webkit-crisp-edges;\n  image-rendering: pixelated;\n  image-rendering: crisp-edges;\n}\n.activity {\n  position: absolute;\n}\n.activity .host {\n  font-size: 50px;\n}\n.activity .host,\n.activity .host::after {\n  background: url("+i(n(27))+");\n  background-size: 354px;\n}\n.activity .host.highlight {\n  filter: brightness(1.3);\n}\n.activity.store {\n  top: 368px;\n  left: 64px;\n}\n.activity.store .host {\n  width: 60px;\n  height: 54px;\n  background-position: -294px 54px;\n}\n.activity.home {\n  top: 279px;\n  left: 315px;\n}\n.activity.home .host {\n  width: 90px;\n  height: 60px;\n  background-position: -120px 114px;\n}\n.activity.office {\n  top: 146px;\n  left: 15px;\n}\n.activity.office .host {\n  width: 60px;\n  height: 117px;\n  background-position: -60px 117px;\n}\n.activity.competition {\n  top: 396px;\n  left: 244px;\n}\n.activity.competition .host {\n  width: 60px;\n  height: 117px;\n  background-position: 0px 117px;\n}\n.activity.gym {\n  top: 105px;\n  left: 240px;\n}\n.activity.gym .host {\n  width: 84px;\n  height: 90px;\n  background-position: -210px 90px;\n}\n.activity ul li.current {\n  color: #555;\n}\n.activity ul li.disabled {\n  color: red;\n}\n.stats {\n  position: absolute;\n  background: white;\n  height: 15px;\n  overflow: hidden;\n  border: 3px solid black;\n  border-radius: 3px;\n  left: 3px;\n  top: 3px;\n  right: 3px;\n  padding: 3px;\n}\n.stats.stats-bottom {\n  top: initial;\n  bottom: 3px;\n}\n.stats canvas {\n  position: absolute;\n}\n.stats canvas.stat-container__stamina {\n  left: 130px;\n}\n.stats canvas.stat-container__money {\n  left: 270px;\n}\n.stats canvas.stat-container__level {\n  left: 320px;\n}\n.time {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n}\n.time .day {\n  margin-right: 10px;\n}\n.text-overlay {\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  right: 10px;\n  padding: 10px;\n  border: 3px solid black;\n  border-radius: 5px;\n  height: 15px;\n  text-overflow: hidden;\n  background-color: white;\n}\n.text-overlay canvas {\n  width: 300px;\n  height: 150px;\n}\n.hidden {\n  display: none;\n}\n",""])},function(t,e){t.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAHYAAAAnCAMAAADtq0xxAAABj1BMVEUAAACBm58pLS6JRy+BRjExNjc6P0B9RjEiLzIaJihvLBR5RDFPT1KW19sPGRstNzZ0OSRmgoQzMze/uoWfm3C19vIvP0Gs39ySjmUrOjw6Ons7JAm41tRNLQhkOyiJhWBEKQhQyD47OCwuHxhAJwhSMQxJKwkyeDJraEo4hDg+JgjL1dYuKyC1vr+QmZs3MzJJQj8vcy/2OgyZtnlylkt5iWccTpIycjlndlciR4kjI0AqQWmDg41ycntUWF9PU1tMb601yES0vRnZ5BAQEBJJTFRSSERJPjlEOzdyaGNjWVRHS1BbUUxjWFMXHy6PhYCCenZtYVxyZmEpJSWSiIOHxdBrYl5ER05hVlFvY15sX1qtm48rKy6LgXxzaWVmXFlqX1opJSMelhAsciQpKSiEenZcVFJvs79nXFdhV1JEPj6kMCONLiYYhAwYXB5pZVpAPjdEQjstKScwLSt5LSifmTAegxYpZSdjX1WCeXQ8OjRzc3NwcHCWkS0XIzQaIzZeWlFhYGB2dnZqamopJyMSVUbyAAAAgHRSTlMA//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8sULx2koUAAAQ9SURBVHjatNUFeuNADAVgM7PTMJPDjPe/2ErW5FOZpisXTb/fvDZRHqOqCg/v+5+DgKYh8tU+Gt34M9S0CPl4H6O28Sew46qqZVkmIYzyvmeobui6Z/u6J80GIcGqGkUv0DewYUPS2Es8Q/e8RJpFGNE0e5b+HTivGH78FCeJbyQewnIsblVAkeX0NLwKwOZ5xTZiz8e0CHsyrlvCGbPPYV4FZJ9qeUU3DBtYgOt1qbQNl1gKFTQZJlSwrTyvtfMcYR2y1mE6LQm2hLNHqobLMKHdrFRbvTyO8xxhA1Ccfqv/DB4Mft6ty4v8gF2BYrdw/9Zw2AMTl7oC5KhkxwgLVNMQluhWwIQCPpn2+62iKAiGpQYV2Nm8WLSmE0KXS9NCWKrbKsICRXYyBXU+nyMcxyU7W62KORyYUNL1Bv/dEJbpFmGBdoHFbT4HuEAY2O1uty/m5QFEDxayDEt0S/uoW4LBJRiSbrdzkfV4GgwsngPDkt3ifsor4FVRPFBkHfc5PBhE0RemqpraV90iyzDJjCIbhAQfBHo6ffHuo5mWWcIA4Kvvu92WLMOMMhscESY0zb5g8SlNC+Gqq2nwTYui97t9DjNKcz4Hl+B4wsSInr7BMmzCN3zSD7p9DguU0zZcZIPwCGR6uma32xcsw4QC+1G3DAv0+SI3zqcLsdfTl90q7gO2TARw+7hbmvudvvP8q7WsthuHoSiq16HSr5TI0DCT6pQxzMxMHz5X1rprbtEZOn5rk2wdb5F0u//l+8EuNN04Ei/5/SV0ckJ3KNx/zdn8kVuEnlIsdQuf391Dt2TtEqii4ktGsIRauBVNEfue2/0jdPt6t9L0kxNVIVjRSiKs3R6fIdbKLaxhAtY0AVVtdpW4RY/WbhFr7ZbuVhpEcSg2xa6qxC16tHaLWGu3uFuZUF3TFcVmU1Sn64/cItbaLe5WbrcuuLriUBVNc7o83v/qFlv7/G63SwesCuyAxxsM/YlbFj5la7nF1pGILyrAmlOHpqFYiIu252u7RWyYreUWWxuReCR6AeBLj/fq+oZfS+ztubXbO9IWY+UWWxv38bhhGA9uT+iR80d+/SSx8Hzu9vnuNTaRTK7lNpViLG0IbNx4CHHOM9mNXF7cmwq3CP7A7fMzYoslJqFlxiqJxCdun+/2AJ/aY5BqNQ1YQPPrx41sdqNWZyK3CEa3G/Sg3wFqoylGXWy12yY4wZLJRId1ExRL3T7vAdZsamJ71V4/bWK5wA5qwxEBo1tmBt3uILQ0bsMzBjB0FcTJJDGdMMwvtzDQvUaTHny9WQ8aR3gut5Gdjxaj0YIxBANWQjHS7Y4Jla+4DVDpFcgQCWUI3pVuYaCyKQYb5+r15Wi4GC1WK/gTgr8jlIJ36A9Itwmoyd7NnukWBopNSXq9ar1WW60WSwklEAZ5BSZQkvJk8j4Y3JKmrxrXGURCfwIxtzyzozHoawAAAABJRU5ErkJggg=="},function(t,e,n){"use strict";n.r(e);n(10),n(11),n(12);var i=n(4);function s(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,{container:e,ttl:n}={}){const i=function(t,e){const n=document.createElement("div"),i=document.createElement("canvas");return e.appendChild(n),n.classList.add("text-overlay"),n.appendChild(i),c(i,t.toUpperCase()),n}(t,e=e||document.querySelector("#game"));return n&&h(i,{container:e,ttl:n}),i}function r(t,e,{x:n=0,y:s=0,color:a="black",textSize:r=14,textAlign:o="left"}={}){const c=t.getContext("2d"),h=Object(i.initFont)(i.font,c),l=e.toUpperCase();if("center"===o){const e=l.split("").length*r*.85;n=t.width/2-e/2}h(l,n,s,r,a)}function o(t){t.getContext("2d").clearRect(0,0,t.width,t.height)}function c(t,...e){o(t),r(t,...e)}function h(t,{container:e,ttl:n=0}={}){e=e||document.querySelector("#game"),setTimeout(()=>{s(t)},1e3*n)}function l(t,e){const n=t.getContext("2d");Object(i.initFont)(i.font,n);e.forEach((e,n)=>{r(t,e.text,{x:e.x,y:e.y||40*n,color:e.color||"white",textSize:e.textSize,textAlign:e.textAlign})})}var d=n(0);function p(t){return new Promise(e=>{setTimeout(e,1e3*t)})}function u(t,{ttl:e=1.5}={}){return a(t,{ttl:e}),p(e)}function m(t){for(let e=0;e<3;e++)setTimeout(()=>{t.container.classList.toggle("inverse"),Object(d.c)()},1e3*e)}async function f(t){window.blockMovement=!0,await t(),window.blockMovement=!1}async function g(){await f(async()=>{await u("Oooh! Level up!"),await u("I can up my stats at home!")})}async function x(){await u("Another level up!")}async function y(){await f(async()=>{await u("Yay! I reached level 4.04!"),await u("Let us join a competition ...",{ttl:1.5}),await u("... and improve my rank!")})}window.blockMovement=!1;const v="left",w="right",b="up",A="down",S="space",C={[b]:!1,[v]:!1,[w]:!1,[A]:!1,[S]:!1};let T=!1;function E(t){return C[t]}T||(!function(){const t=(t,e)=>C[t]=e,e=(e,n)=>{e.preventDefault(),[38,87].includes(e.which)&&t(b,n),[40,83].includes(e.which)&&t(A,n),[37,65].includes(e.which)&&t(v,n),[39,68].includes(e.which)&&t(w,n),32===e.which&&t(S,n)};window.onkeydown=window.onkeypress=t=>e(t,!0),window.onkeyup=t=>e(t,!1)}(),T=!0);class k{constructor(){this.container=document.createElement("div"),this.levelStats={stamina:1,strength:1,requiredExperience:100},this.currentStats={stamina:this.maxStamina,rank:1e4+~~(1e4*Math.random()),money:4.04,experience:0,level:1,availableStatPoints:0},this.position={x:10,y:40},this.state={dressed:!1}}get maxStamina(){return 100*this.levelStats.stamina}updateLevelStat(t,e){this.levelStats[t]+=e,this.currentStats.availableStatPoints-=e}updateStat(t,e){if("dressed"===t)return async function(){location.href.includes("skipStory")||await f(async()=>{await u("Aaah. Better."),await u("I feel the urge to exercise!"),await u("Off to the gym!")})}(),this.state.dressed=e;if(t.includes(".")){const[n,i]=t.split(".");this[n][i]+=e}else{for(this.currentStats[t]+=e;"experience"===t&&this.currentStats.experience>=this.levelStats.requiredExperience;)this.currentStats.availableStatPoints+=this.currentStats.level,this.currentStats.level+=1,this.currentStats.experience-=this.levelStats.requiredExperience,this.levelStats.requiredExperience*=2,setTimeout(()=>{switch(Object(d.d)(),this.currentStats.level){case 2:g();break;case 4:y();break;default:x()}},50);"stamina"===t&&(this.currentStats.stamina=Math.max(Math.min(this.currentStats.stamina,this.maxStamina),0))}}hasStat(t,e){return"time"===t||(Object.keys(this.currentStats).includes(t)?this.currentStats[t]>=e:Object.keys(this.levelStats).includes(t)?this.levelStats[t]>=e:"dressed"===t&&this.state.dressed===e)}appendTo(t){return t.appendChild(this.container),this.container.classList.add("player"),this}update(){window.blockMovement||(E(v)?this.position.x-=5:E(w)&&(this.position.x+=5),E(b)?this.position.y-=5:E(A)&&(this.position.y+=5)),this.container.style.left=this.position.x+"px",this.container.style.top=this.position.y+"px"}render(){this.container.classList.toggle("walk",E(b)||E(A)||E(v)||E(w)),E(v)&&!this.container.classList.contains("inverse")&&this.container.classList.add("inverse"),E(w)&&this.container.classList.contains("inverse")&&this.container.classList.remove("inverse"),this.container.classList.toggle("dressed",this.state.dressed)}}class I{constructor(t="#game"){this.game=document.querySelector(t)}}var M=n(3);function z(t,e){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return n.x<i.x+i.width&&n.x+n.width>i.x&&n.y<i.y+i.height&&n.y+n.height>i.y}function R(t,e){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return n.x+n.width<i.x}n(16);const L=t=>void 0===t.item.hidden||!1===t.item.hidden;class q{constructor(t,e){this.items=[...t,U],this.state={selectedItem:this.items.find(L),selectedItemIndex:this.items.findIndex(L),allowToggle:!0,allowSelect:!1},this.container=document.createElement("div"),this.onSelect=e,setTimeout(()=>{this.state.allowSelect=!0},200)}appendTo(t){return this.hostContainer=t,t.appendChild(this.container),this.container.classList.add("menu"),this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this}update(){if(this.items.forEach(t=>t.update({selected:!1})),this.state.selectedItem.update({selected:!0}),this.state.allowToggle&&(E(b)||E(A))){this.state.allowToggle=!1,setTimeout(()=>{this.state.allowToggle=!0},200);const t=E(b)?-1:1;do{const e=this.state.selectedItemIndex+t,n=e>=0?e%this.items.length:this.items.length-1;this.state.selectedItemIndex=n,this.state.selectedItem=this.items[this.state.selectedItemIndex]}while(!L(this.state.selectedItem))}this.state.allowSelect&&E(S)&&this.state.selectedItem.item.requirementsFulfilled&&(this.state.allowSelect=this.state.allowToggle=!1,this.onSelect(this.state.selectedItem.item)),L(this.state.selectedItem)||(this.state.selectedItem=this.items.find(L),this.state.selectedItemIndex=this.items.findIndex(L))}render(t){window.blockMovement=!0,this.canvas.width=this.hostContainer.clientWidth-44,this.canvas.height=30*this.items.length+60,this.container.style.top=this.hostContainer.clientHeight-48-this.canvas.height+"px",o(this.canvas);let e=0;this.items.filter(L).forEach(n=>{n.render(this.canvas,e,t);const i=n===this.state.selectedItem&&n!==U?90:30;e+=i})}destroy(){window.blockMovement=!1,s(this.canvas),s(this.container)}reset(){setTimeout(()=>{this.state.allowSelect=this.state.allowToggle=!0},200)}}class B{constructor(t){this.item=t,this.state={selected:!1}}update(t){this.state={...this.state,...t}}format(t,e){return`${t}: ${Object.entries(e).map(([t,e])=>`${t}: ${e}`).join(", ")}`}getColor(){return!1===this.item.requirementsFulfilled?"red":this.state.selected?"black":"grey"}render(t,e,n){const i=this.getColor(),s=this!==U&&this.item.remainingTime?` ${this.item.remainingTime} sec`:"",a=[{text:`${"function"==typeof this.item.title?this.item.title(n):this.item.title}${s}`,y:e,color:i}];this!==U&&this.state.selected&&(a.push({text:this.format("Requirements",this.item.requirements),y:e+30,color:i,textSize:10}),a.push({text:this.format("Effect",this.item.effects),y:e+50,color:i,textSize:10})),l(t,a)}}const U=new B({title:"Exit venue",requirements:{time:5},effects:{}});n(18);const j=[v,w,b,A],O={[v]:"←",[w]:"→",[b]:"↑",[A]:"↓"};class J{constructor(t,e){this.container=document.createElement("div"),this.player=t,this.originalPlayerPosition={...t.position},this.challengeName=e,this.state={started:!1,spawnTarget:!0,spawnDelay:3e3,enemySpeed:2,changeDifficulty:!0,score:0,remainingTime:40.4,completed:!1,renderSpaceHint:!0,completionTriggered:!1},this.enemies=[],this.scoreCanvas=document.createElement("canvas"),this.startCanvas=document.createElement("canvas")}appendTo(t){return t.appendChild(this.container),this.hostContainer=t,this.container.classList.add("mini-game"),this.container.appendChild(this.scoreCanvas),this.scoreCanvas.classList.add("score"),this.container.appendChild(this.startCanvas),this.startCanvas.classList.add("start-mini-game"),setInterval(()=>{this.state.renderSpaceHint=!this.state.renderSpaceHint},750),this}initStateChange(t,e){this.state[t]=!1,setTimeout(()=>{this.state[t]=!0},e)}spawnEnemy(){const t=j[~~(Math.random()*j.length)],e={container:document.createElement("div"),control:t,position:{x:-50,y:this.targetContainer.offsetTop+25},highlight:!1,speed:this.state.enemySpeed,destroyed:!1};e.container.innerHTML=O[t],e.container.classList.add("enemy"),this.container.appendChild(e.container),this.enemies.push(e)}removeEnemy(t){s(t.container),this.enemies=this.enemies.filter(e=>t!==e)}updateEnemies(){[...this.enemies].forEach(t=>{R(this.container,t.container)&&this.removeEnemy(t)}),this.enemies.forEach(t=>{t.destroyed?(t.contains=t.missed=t.collides=!1,t.position.y-=2):(t.position.x+=t.speed,t.collides=z(this.targetContainer,t.container),t.contains=function(t,e){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return n.x<i.x+i.width&&n.x<i.x&&n.x+n.width>i.x&&n.x+n.width>i.x+i.width}(this.targetContainer,t.container),t.missed=R(this.targetContainer,t.container))})}destroyEnemy(t){t.destroyed=!0,setTimeout(()=>this.removeEnemy(t),1e3)}scoreEnemy(t){this.state.score+=t.contains?2:1}onComplete(t){return this.onComplete=()=>{this.state.completionTriggered||(this.state.completionTriggered=!0,setTimeout(()=>{s(this.scoreCanvas),s(this.container),this.player.position=this.originalPlayerPosition,this.player.updateStat("rank",-this.state.score),window.blockMovement=!1,setTimeout(async()=>{this.player.hasCompletedCompetition||(this.player.hasCompletedCompetition=!0,await async function(){await u("No idea why but ..."),await u("... I totally want to ..."),await u("... reach rank 404! Woop!")}())},1e3),t(this)},2e3))},this}update(){if(window.blockMovement=!0,this.targetContainer||(this.targetContainer=document.createElement("div"),this.targetContainer.classList.add("target"),this.container.appendChild(this.targetContainer)),!this.state.started){if(!E(S))return;this.state.started=!0}this.state.spawnTarget&&(this.initStateChange("spawnTarget",this.state.spawnDelay),this.spawnEnemy()),this.state.changeDifficulty&&(this.initStateChange("changeDifficulty",2e3),this.state.spawnDelay=Math.max(this.state.spawnDelay-200,500),this.state.enemySpeed=Math.min(this.state.enemySpeed+.1,7)),0===this.state.remainingTime&&(this.enemies.forEach(t=>this.destroyEnemy(t)),this.state.completed=!0),this.updateEnemies();const t=this.enemies.find(t=>t.collides);t&&E(t.control)&&(this.destroyEnemy(t),this.scoreEnemy(t)),this.timeIntervalId||(this.timeIntervalId=setInterval(()=>{if(0===this.state.remainingTime)return clearInterval(this.timeIntervalId);this.state.remainingTime=~~(this.state.remainingTime-1)},1e3))}render(){this.enemies.forEach(t=>{t.container.style.left=t.position.x+"px",t.container.style.top=t.position.y+"px",t.container.classList.toggle("collides",t.collides),t.container.classList.toggle("contains",t.contains),t.container.classList.toggle("missed",t.missed),t.container.classList.toggle("destroyed",t.destroyed)}),this.startCanvas.width=this.scoreCanvas.width=this.hostContainer.clientWidth,c(this.scoreCanvas,`Score: ${this.state.score}       Time: ${this.state.remainingTime}`,{color:"white",textAlign:"center"}),l(this.startCanvas,[{text:this.challengeName,textSize:24,x:50},{text:!this.state.started&&this.state.renderSpaceHint?"Press SPACE to start competition":"",textAlign:"center",y:50}])}}class D extends J{constructor(t){super(t,"Jumping Jacks"),this.container.classList.add("jumping-jacks"),this.state={...this.state,repetitions:0,countdown:404,started:!1,playerHoisted:!1,allowJump:void 0,yDelta:0}}jump(){const t=this.player.position.y;this.state.yDelta=-3,setTimeout(()=>{this.state.yDelta*=-1,setTimeout(()=>{this.state.yDelta=0,this.player.position.y=t,this.state.allowJump=!0},200)},200)}update(){J.prototype.update.call(this),this.state.completed?this.onComplete():(this.state.allowJump&&this.state.started&&(this.state.allowJump=!1,Math.random()<.1&&this.player.container.classList.toggle("inverse"),this.jump()),this.state.playerHoisted&&(this.player.position.y+=this.state.yDelta,void 0===this.state.allowJump&&(this.state.allowJump=!0)))}render(){J.prototype.render.call(this),this.state.playerHoisted||(this.player.container.style.zIndex=999,this.player.position.x=this.hostContainer.clientWidth/2-20,this.player.position.y=this.hostContainer.clientHeight/2-20,this.state.playerHoisted=!0)}}class F{constructor(t,e,{onActivityStart:n,onActivityEnd:i}={}){this.container=document.createElement("div"),this.game=t,this.player=t.player,this.config=e,this.state={showItems:!1,currentItem:null,investedTime:null,highlight:!1,toggledViaKeyboardAt:new Date},this.onActivityStart=n,this.onActivityEnd=i}hasCurrent(){return!!this.state.currentItem}appendTo(t){return this.gameContainer=t,t.appendChild(this.container),this.container.classList.add(this.config.name,"activity"),this}applyItemEffects(t){Object.keys(t.effects).forEach(e=>{this.player.updateStat(e,t.effects[e])})}update(){this.hasCurrent()&&(this.state.investedTime+=M.minutesPerTick,this.state.currentItem.remainingTime=this.state.currentItem.requirements.time-this.state.investedTime,this.state.investedTime>=this.state.currentItem.requirements.time&&(this.state.investedTime=0,delete this.state.currentItem.remainingTime,this.applyItemEffects(this.state.currentItem),this.resetCurrent())),this.state.showItems&&this.itemMenu&&(this.itemMenu.items.forEach(t=>{t.item.requirementsFulfilled=this.requirementsFulfilled(t.item.requirements),t.item.hidden=!t.item.requirementsFulfilled&&!!t.item.hideIfRequirementsNotMet}),this.itemMenu.update()),this.hostContainer&&(this.state.highlight=z(this.player.container,this.hostContainer),this.state.highlight&&E(S)&&this.canBeToggledViaKeyboard()&&!this.state.currentItem?"home"===this.config.name||this.player.state.dressed?(this.toggle(),this.state.toggledViaKeyboardAt=new Date):async function(){await u("I am naked! Need my clothes!")}():this.state.highlight||this.toggle(!1),this.state.highlight&&!this.state.textContainer&&(this.state.textContainer=a(this.config.name+" - press space to open")),!this.state.highlight&&this.state.textContainer&&(this.state.textContainer=h(this.state.textContainer)))}render(){this.requirementsFulfilled(this.config.requirements||{})&&(this.renderHost(),this.state.showItems&&this.renderItems())}renderItems(){this.itemMenu||(this.itemMenu=new q(this.config.items.map(t=>new B(t)),t=>this.onItemSelect(t)).appendTo(this.gameContainer)),this.itemMenu.render(this.player)}renderHost(){this.hostContainer||(this.hostContainer=document.createElement("div"),this.hostContainer.classList.add("host")),this.container.contains(this.hostContainer)||this.container.appendChild(this.hostContainer),this.hostContainer.classList.toggle("highlight",this.state.highlight)}toggle(t){this.state.showItems=void 0!==t?t:!this.state.showItems}canBeToggledViaKeyboard(){return new Date-this.state.toggledViaKeyboardAt>500}onItemSelect(t){if(t.miniGame)return setTimeout(()=>this.resetCurrent()),void this.game.renderables.push(new D(this.player).appendTo(this.game.ui.game).onComplete(e=>{this.game.removeRenderable(e),this.applyItemEffects(t),this.resetCurrent()}));this.state.currentItem=t,this.state.investedTime=0,t.soundEffect&&Object(d.b)(t.soundEffect)}resetCurrent(){this.itemMenu&&this.itemMenu.destroy(),this.state.currentItem=null,this.toggle(!1),this.itemMenu=void 0}requirementsFulfilled(t){return Object.entries(t).every(([t,e])=>this.player.hasStat(t,e))}findItemContainer(t){return Array.from(this.itemMenu.querySelectorAll("li")).find(e=>e.querySelector(".title").innerText===t.title)}}var N=n(6),P=n(7),W={name:"home",items:[{title:"Dress up",requirements:{dressed:!1,time:10},effects:{dressed:!0},soundEffect:",,528,.01,,.48,,.6,-11.6,,,,.32,4.2",hideIfRequirementsNotMet:!0},{title:"Thorough sleep",requirements:{time:480},effects:{stamina:100}},{title:"Quick nap",requirements:{time:120},effects:{stamina:50}},...["stamina","strength"].map(t=>({title:e=>`Up ${t} / Current: ${e.levelStats[t]}`,requirements:{availableStatPoints:1,time:10},effects:{availableStatPoints:-1,["levelStats."+t]:1},hideIfRequirementsNotMet:!0}))]},_=n(8),H=n(9);class Y{constructor(t){this.containerTop=document.createElement("div"),this.containerBottom=document.createElement("div"),this.player=t.player,this.time=t.time,this.init()}initStatContainer(t,e){const n=this[t+"Container"]=document.createElement("canvas");n.classList.add("stat-container","stat-container__"+t),e.appendChild(n)}init(){this.initStatContainer("rank",this.containerTop),this.initStatContainer("stamina",this.containerTop),this.initStatContainer("money",this.containerTop),this.initStatContainer("level",this.containerTop),this.initStatContainer("time",this.containerBottom),this.initStatContainer("level",this.containerBottom)}appendTo(t){return this.hostContainer=t,t.appendChild(this.containerTop),t.appendChild(this.containerBottom),this.containerTop.classList.add("stats","stats-top"),this.containerBottom.classList.add("stats","stats-bottom"),this}updateItem(t,e){this[t+"Container"];container.querySelector(".value").innerHTML=e}update(){this.containerBottom.classList.toggle("hidden",this.hostContainer&&this.hostContainer.querySelector(".text-overlay"))}render(){const t={level:"lvl"};["rank","stamina","money","level"].forEach(e=>{const n=this[e+"Container"];let i=this.player.currentStats[e];"stamina"===e?i=~~this.player.currentStats.stamina:"money"===e?i=i.toFixed(2):"level"===e&&(i=V(i)),c(n,`${t[e]||e}: ${i}`)});const e=`Day ${this.time.day} ${V(this.time.hours)}:${V(this.time.minutes)}`;c(this.timeContainer,e);const n=100*this.player.currentStats.experience/this.player.levelStats.requiredExperience;this.containerBottom.style.background=`linear-gradient(to right, #FFD700, #FFD700 ${n}%, white ${n}%, white 100%)`}}const V=t=>t>=10?t:"0"+t;n(20);class K{constructor(){this.container=document.createElement("div"),setTimeout(()=>{this.generateTiles()})}generateTiles(){const t=document.querySelector("#game");this.container.classList.add("ground");for(let e=0;e<t.clientWidth/90;e++)for(let n=0;n<t.clientHeight/45;n++){const t=document.createElement("div");t.classList.add("tile","grass"),t.style.left=90*e+"px",t.style.top=45*n+"px";const i=t.cloneNode();i.style.left=90*e+45+"px",i.style.top=45*n+22.5+"px",Math.random()<.05&&t.classList.remove("grass"),this.container.appendChild(t),this.container.appendChild(i)}}appendTo(t){return t.appendChild(this.container),this}update(){}render(){}}class Q{constructor(){this.container=document.createElement("div"),this.entities=[new K]}appendTo(t){return t.appendChild(this.container),this.container.classList.add("world"),this.entities.forEach(t=>t.appendTo(this.container)),this}}n(23);class G{constructor(t){this.game=t,this.container=document.createElement("div"),this.hostContainer,this.state={showSpaceLine:!0},this.spaceInterval=setInterval(()=>{this.state.showSpaceLine=!this.state.showSpaceLine},400)}appendTo(t){return this.hostContainer=t,this.container.classList.add("welcome-screen"),this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),t.appendChild(this.container),this}update(){}render(){E(S)&&this.container&&(clearInterval(this.spaceInterval),s(this.container),this.container=void 0,Object(d.a)().then(()=>{this.game.start()},()=>{this.game.start()})),this.container&&(this.canvas.width=this.hostContainer.clientWidth,this.canvas.height=this.hostContainer.clientHeight,l(this.canvas,[{text:""},{text:""},{text:""},{text:"404",textSize:28,textAlign:"center"},{text:"repetitions",textSize:28,textAlign:"center"},{text:""},{text:""},{text:""},{text:""},{text:""},{text:""},{text:""},{text:this.state.showSpaceLine?"Press SPACE to start":"",textAlign:"center"},{text:"The game will ask for access to your audio system!",textSize:8,textAlign:"center"}]))}}(new class{constructor(){this.player=new k,this.ui=new I,this.time={day:0,hours:0,minutes:0},this.state={busy:!1,renderWorkMenu:!1,renderWorkoutMenu:!1,started:!1},this.renderables=[(new Q).appendTo(this.ui.game),new Y(this).appendTo(this.ui.game),new F(this,N).appendTo(this.ui.game),new F(this,P).appendTo(this.ui.game),new F(this,W).appendTo(this.ui.game),new F(this,_).appendTo(this.ui.game),new F(this,H).appendTo(this.ui.game),this.player.appendTo(this.ui.game),new G(this).appendTo(this.ui.game)]}removeRenderable(t){this.renderables=this.renderables.filter(e=>e!==t)}increaseTime(){this.time.minutes+=M.minutesPerTick,this.time.minutes>=60&&(this.time.hours+=1,this.time.minutes=0),this.time.hours>=24&&(this.time.day+=1,this.time.minutes=this.time.hours=0)}run(){setInterval(()=>{this.state.started&&(this.increaseTime(),this.renderables.find(t=>t.hasCurrent&&t.hasCurrent())||this.player.updateStat("stamina",-M.staminaPerTick)),this.renderables.forEach(t=>t.update&&t.update()),this.renderables.forEach(t=>t.render&&t.render())},M.tickDelay)}start(){this.state.started=!0,async function(t){location.href.includes("skipStory")||(await f(async()=>{m(t),await u("Ooof!?! Location not found!?!"),await u("Ooof!?! Where am I?")}),await p(2),await f(async()=>{m(t),await u("Hmm... Clothes not found!"),await u("Hmm... Why am I naked?!"),await u("I better head home!")}))}(this.player)}}).run();n(25)}]);</script></body></html>